


@foreach (var item in Model.ListBuildingPermits)
{
    
<tr>

    @*<td class="center"> <a class="btn btn-primary modal-link" href="@Url.Action("LandSurvey", "BuildingPermits")"> تفاصيل قطعة الأرض  </a> </td>*@
    <td class="center"> <a class="btn btn-primary modal-link" href="@Url.Action("PermitDetails", "BuildingPermits", new { @Id = item.Id })"> @item.TransactNo  </a> </td>


    @{
        var User = DMeServices.Models.Common.UserCom.UserByCivilID(item.ConsultantCivilId);
        var Region = DMeServices.Models.Common.BuildingServices.RegionsCom.RegionByID(item.RegionID);
        var Status = DMeServices.Models.Common.LookupsTypeCom.LookupByID((int)item.WorkflowStatus).LookupNameAr;
        var StatusColor = DMeServices.Models.Common.LookupsTypeCom.LookupByID((int)item.WorkflowStatus).LookupNameEn;

        
        if (User != null)
        {
            <td class="center">
                @User.CompanyName
            </td>
            <td class="center">
                @User.FullName
            </td>
        }
        else
        {
            <td class="center">
                لايوجد
            </td>
            <td class="center">
                لايوجد
            </td>
        }

    }
    <td class="center">@item.OwnerName</td>
    <td class="center">@Region.RegionArName</td>
    <td class="center">@item.RequestDate.ToShortDateString()</td>
    <td class="center @StatusColor">@Status</td>
    <td class="center"> @item.OwnerCivilId</td>
    @if (Model.oEmployeeInfo.IsEngineerHead)
    {


        if (item.DmEngineerNo == null)
        {
            <td class="center"> @Html.DisplayName(DMeServices.Models.Resources.DisplayName_Ar.NotFound)</td>
        }
        else
        {
            <td class="center">@DMeServices.Models.Common.EmployeeCom.EmployeeByID(item.DmEngineerNo.ToString()).NAME </td>
        }

    }
</tr>
}


